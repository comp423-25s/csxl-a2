<div class="container">
  <h1>Chatbot Conversation History</h1>

  <div class="sort-controls">
    <label for="sort">Sort by:</label>
    <select id="sort" [(ngModel)]="selectedSort">
      <option value="date-desc">Newest</option>
      <option value="date-asc">Oldest</option>
      <option value="rating-desc">Highest Rating</option>
      <option value="rating-asc">Lowest Rating</option>
    </select>
  </div>

  <div class="conversation-list">
    @for (convo of sortedConversations; track convo.id) {
      <div class="conversation-card">
        <div class="conversation-title">Conversation #{{ convo.id }}</div>
        <div class="conversation-meta">
          <span class="rating">Rating: {{ convo.rating }}</span>
          <span class="date">{{ convo.date | date: 'medium' }}</span>
        </div>
        <ul class="messages">
          @for (msg of convo.messages; track $index) {
            <li>{{ msg }}</li>
          }
        </ul>
      </div>
    }

    @if (hasMore) {
      <div class="see-more">
        <button (click)="loadMore()">See More</button>
      </div>
    }
  </div>
</div>